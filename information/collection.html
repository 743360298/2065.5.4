
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
  <link href="../css/mui.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/head.css">
  <link rel="stylesheet" href="../css/animate.css">
  <link rel="stylesheet" href="../css/info1.css">
  <!-- <link rel="stylesheet" href="../css/info.css"> -->
  <link rel="stylesheet" href="../css/PersonalInfo.css">
  <script src="../js/jquery-1.12.2.js"></script>
  <script src="../js/title.js"></script>
  <script src="../js/mui.min.js"></script>
  <script src="../js/public.js"></script>
  <style>
    body{
      background-color: #f7f7f7;
    }
    .mui-icon-back:before, .mui-icon-left-nav:before{
      color: #333 ;
    }
    body{
      background-color: #f7f7f7;
    }
    #header{
      border-bottom: 1px solid #f7f7f7 ;
      box-shadow: 0 0 0.05rem 0 #f7f7f7 ;
    }
    .mui-bar-nav~.mui-content{
      padding-bottom: 1rem ;
    }
    .h_top,.h_del{
      height: 2.1rem !important;
      line-height: 2.1rem ;
      width: 1.8rem ;
      right: -3.5rem ;
    }
    .h_top{
      right: -1.7rem ;
    }
    .activeList{
      display: none ;
    }
    .activeList2{
      display: block ;
    }
    .activeHeadTitle{
      opacity: 0 ;
    }
    .activeHeadTitle1{
      opacity: 1 ;
    }
    .activeHeadTitle2{
      opacity: 1 ;
    }
    </style>
</head>
<body>
  <header id="header" class="mui-bar mui-bar-nav">
    <h1 class="mui-title activeHeadTitle ">我的攻略</h1>
    <h1 class="mui-title activeHeadTitle activeHeadTitle1 ">我的收藏</h1>
    <a class=" mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
  </header>
  
  <div class="mui-content">


    <!-- 为空显示 -->
    <!-- <div class="collectionNull">
      <img src="../images/00.png" alt="">
      <span>你的收藏为空,</span>
      <span>赶紧去查看收藏吧…</span>
    </div> -->

     <!-- 为空显示 -->
    <div class="strategyNull">
       <img src="../images/00.png" alt="">
       <div class="activeList activeList1">
          <span>你的攻略为空,</span>
          <span>赶紧去查看攻略吧…</span>
       </div>
       <div class="activeList activeList2">
          <span>你的收藏为空,</span>
          <span>赶紧去查看收藏吧…</span>
       </div>
    </div>

    <div class="collectionNav">
      <span>攻略</span>
      <span  class="active">收藏</span>
    </div>

    <!-- 收藏 -->
    <ul class="collectionList activeList activeList2">
      <!-- <li class="collectionLi">
        <a href="javascript:;">
          <div class="collectionItem">
            <img src="../images/12-2.jpg" alt="">
            <div class="collectionTxt">
              <span>蜀客酸菜鱼（珠村店）</span>
              <span>酸菜鱼</span>
            </div>
          </div>
          <div class="h_top">置顶</div>
          <div class="h_del">删除</div>
        </a>
      </li> -->


      
    </ul>

    <!-- 攻略 -->
    <ul class="strategyList activeList">
        <!-- <li>
          <a href="javascript:;">
            <div class="strategyItem">
              <img src="../images/timg.jpg" alt="">
              <div class="strategytitle"><span>单身狗</span></div>
              <div class="strategyComments">
                 <div><img src="../images/mipmap-xhdpi/icon_message.png" alt=""><span>10</span></div>
                 <div><img src="../images/mipmap-xhdpi/icon_good.png" alt=""><span>100</span></div>
                 <div class="deleteBtn"><img src="../images/mipmap-xhdpi/delete.png" alt=""><span>删除</span></div>
              </div>
            </div>
          </a>
        </li> -->
      
    </ul>
  </div>
  
  
  
  
  
  
  
  
  
  
<!-- Code injected by live-server -->
<script type="text/javascript">
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					head.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					head.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script></body>
</html>

<script src="../js/PersonalInfo.js"></script>
<script>

      $(function () {
        // 没有值 默认显示
      if($(".collectionList li").length!=0){
          $(".strategyNull").hide()
        }else{
          $(".strategyNull").show()
        }
      })



  
  
  // tab
  $('.collectionNav span').on('click',function () {
    $('.collectionNav span').removeClass('active')
  

    $(this).toggleClass('active')
      if($(this).index()==0){
        $(".activeHeadTitle").css('opacity','1')
        $(".activeHeadTitle1").css('opacity','0')
        
        $('.activeList').css('display','none')
        $('.activeList1').css('display','block')

        $(".strategyList ").show()
        $(".collectionList ").hide()
        if($(".strategyList li").length!=0){
          $(".strategyNull").hide()
        }else{
          $(".strategyNull").show()
        }
        
        
      }else{
        $(".activeHeadTitle").css('opacity','0')
        $(".activeHeadTitle1").css('opacity','1')

        $('.activeList').css('display','block')
        $('.activeList1').css('display','none')

    
        $(".strategyList ").hide()
        $(".collectionList ").show()
        if($(".collectionList li").length!=0){
          $(".strategyNull").hide()
        }else{
          $(".strategyNull").show()
        }
      }
  
    

    
    // if ($('.strategyList li').length == 0) {
    //   console.log('攻略长度'+$('.collectionList li').length);
    //   $('.strategyNull').fadeOut()
    // }
    
  })
  
  // 置顶
  $(".h_top").on('tap',  function(event) {
    event.stopPropagation()
    // event.preventDefault;
    var parent=$(this).parent().parent();
    var parents=$(this).parents(".collectionList");
    var len=parents.children().length;
    
    console.log('置頂');
    parents.prepend(parent);
    $(".collectionLi:first a").animate({'margin-left':'0'},0);
    console.log($(".collectionLi:first"));
  });
  
  
  // 攻略删除
$('.deleteBtn').on('click',function () {
  $(this).parent().parent().parent().parent().slideUp(500, function () {
     $(this).remove();
    })
    console.log($('.strategyList li').length);

  if ($('.strategyList li').length == 1) {
      $('.strategyNull').fadeIn(300)
    }else{
      $('.strategyNull').fadeOut(300)
    }
})

  // 收藏删除 
  $('.h_del').on('tap',function(){
    event.stopPropagation()
    console.log('删除'); 
    $(this).parent().slideUp(50, function () {
      $(this).parent().remove();
    });

    console.log('收藏'+$('.collectionList li').length);
    
    if ($(".collectionList li").length== 1) {
      $('.strategyNull').fadeIn(300)
    }else{
      $('.strategyNull').fadeOut(300)
    }

    // $('.delBounced').show(200);
    // $('.mui-active').show();
    // mui.confirm("删除后，将会清空该会话所有记录","确定删除该会话？",["确定","取消"],function(etype){
		// 			var index = etype.index ;
		// 			if(index == 0 ){
    //          $(this).parent().parent().slideUp(50, function () {
    //          $(this).remove();
    //          $('.delBounced').hide(200);
    //          $('.mui-active').hide();
    //         });
		// 			}else if(index == 1){
		// 					// 点取消 不删除
    //           $('.delBounced').hide(200);
    //           $('.mui-active').hide();
    //      }
    //   })
  })
</script>
<script>
// 左滑删除
$(document).ready(function(e) {
    // 设定每一行的宽度=屏幕宽度+按钮宽度
    $(".collectionLi a").width($(".collectionLi").width() + $(".line-btn-delete").width());
    // 设定常规信息区域宽度=屏幕宽度
    $(".collectionLi a").width($(".collectionLi").width());
    // 设定文字部分宽度（为了实现文字过长时在末尾显示...）
    $(".line-normal-msg").width($(".collectionLi a").width() - 280);

    // 获取所有行，对每一行设置监听
    var lines = $(".collectionLi a");
    var len = lines.length; 
    var lastX, lastXForMobile;

    // 用于记录被按下的对象
    var pressedObj;  // 当前左滑的对象
    var lastLeftObj; // 上一个左滑的对象

    // 用于记录按下的点
    var start;

    // 网页在移动端运行时的监听
    for (var i = 0; i < len; ++i) {
        lines[i].addEventListener('touchstart', function(e){
            lastXForMobile = e.changedTouches[0].pageX;
            pressedObj = this; // 记录被按下的对象 

            // 记录开始按下时的点
            var touches = event.touches[0];
            start = { 
                x: touches.pageX, // 横坐标
                y: touches.pageY  // 纵坐标
            };
        });

        lines[i].addEventListener('touchmove',function(e){
            // 计算划动过程中x和y的变化量
            var touches = event.touches[0];
            delta = {
                x: touches.pageX - start.x,
                y: touches.pageY - start.y
            };

            // 横向位移大于纵向位移，阻止纵向滚动
            if (Math.abs(delta.x) > Math.abs(delta.y)) {
                event.preventDefault();
            }
        });

        lines[i].addEventListener('touchend', function(e){
            if (lastLeftObj && pressedObj != lastLeftObj) { // 点击除当前左滑对象之外的任意其他位置
                $(lastLeftObj).animate({marginLeft:"0"}, 300); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
            }
            var diffX = e.changedTouches[0].pageX - lastXForMobile;
            if (diffX < -100) {
                $(pressedObj).animate({marginLeft:"-4rem"}, 300); // 左滑
                lastLeftObj && lastLeftObj != pressedObj && 
                    $(lastLeftObj).animate({marginLeft:"0"}, 300); // 已经左滑状态的按钮右滑
                lastLeftObj = pressedObj; // 记录上一个左滑的对象
            } else if (diffX > 100) {
              if (pressedObj == lastLeftObj) {
                $(pressedObj).animate({marginLeft:"0"}, 300); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
              }
            }
        });
    }

    // 网页在PC浏览器中运行时的监听
    for (var i = 0; i < len; ++i) {
        $(lines[i]).bind('mousedown', function(e){
            lastX = e.clientX;
            pressedObj = this; // 记录被按下的对象
        });

        $(lines[i]).bind('mouseup', function(e){
            if (lastLeftObj && pressedObj != lastLeftObj) { // 点击除当前左滑对象之外的任意其他位置
                $(lastLeftObj).animate({marginLeft:"0"}, 300); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
            }
            var diffX = e.clientX - lastX;
            if (diffX < -100) {
                $(pressedObj).animate({marginLeft:"-132px"}, 300); // 左滑
                lastLeftObj && lastLeftObj != pressedObj && 
                    $(lastLeftObj).animate({marginLeft:"0"}, 300); // 已经左滑状态的按钮右滑
                lastLeftObj = pressedObj; // 记录上一个左滑的对象
            } else if (diffX > 100) {
              if (pressedObj == lastLeftObj) {
                $(pressedObj).animate({marginLeft:"0"}, 300); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
              }
            }
        });
    }
});

</script>
